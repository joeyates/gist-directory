#!/usr/bin/env ruby
# -*- encoding: utf-8 -*-
$LOAD_PATH.unshift(File.expand_path("../lib", __dir__))

require "gist_directory"

def usage
  puts <<-EOT
#{$0} create DIRECTORY [FILE]"

DIRECTORY:
Creates a Gist with a single file.

FILE:

By default, a Markdown file called basename([DIRECTORY]) + ".md" is created.
Supply an optional filename to use instead of this default.
  EOT
end

if ARGV.size < 2
  usage
  exit 0
end

command = ARGV[0]
path = ARGV[1]
directory = File.basename(path)
file = ARGV[2] || directory + ".md"

raise "Unknown command '#{command}'" nless command  == "create"

GistDirectory.new(path: path).create(filename: file)
